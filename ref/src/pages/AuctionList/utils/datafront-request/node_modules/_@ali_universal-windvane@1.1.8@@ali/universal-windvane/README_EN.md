# universal-windvane ![universal-windvane](http://web.npm.alibaba-inc.com/badge/v/@ali/universal-windvane.svg)

Provides a mechanism for communicating with clients. Support WindVane SDK v2.2 and above.

* [WindVane api](http://h5.alibaba-inc.com/api/WindVane-API.html)
* [Taobao Client WindVane api](http://h5.alibaba-inc.com/api/TaobaoClient-API.html)

## Usage

```js
import Windvane from '@ali/universal-windvane';
```

### Web

Use the JSBridge API，Introduce in HTML [//g.alicdn.com/mtb/lib-windvane/2.1.8/windvane.js](//g.alicdn.com/mtb/lib-windvane/2.1.8/windvane.js)，it provides the capability to invoke the client interface.

```js
<script src="//g.alicdn.com/mtb/lib-windvane/2.1.8/windvane.js"></script>
```

## Methods

### `call(ClassName, MethodName, options, successCallback, failureCallback)`
`The old version of the call method is deprecated. Note that the usage differs from common usage.`
Call windvane api

#### Params

| property | type | describe | required | default |
|---|---|---|---|---|
| `ClassName` | String | API class name. | yes | - |
| `MethodName` | String | API method name. | yes | - |
| `options` | Object | Parameters: specific reference [windvane official document](http://h5.alibaba-inc.com/api/WindVane-API.html). | false | - |
| `successCallback` | Function | Success callback. | false | - |
| `failureCallback` | Function | Failure callback. | false | - |

#### Demo

```js
Windvane.call('WebAppInterface', 'setCustomPageTitle', {
  title: 'set title'
}, () => {
  alert('set success.');
}, (error) => {
  alert(JSON.stringify(error))
  document.title = 'set title';
});
```

### `call2(name, params, successCallback, failureCallback)`

Call the JSBridge provided by WindVane.

#### Params

| property | type | describe | required | default |
|-----|---|---|---|---|
| `name` | String | The name of the JSBridge to be invoked，Note the format `class.method`. | yes | - |
| `params` | Object | Parameters: specific reference [windvane official document](http://h5.alibaba-inc.com/api/WindVane-API.html). | false | `null` |
| `successCallback` | Function | Success callback. | false | - |
| `failureCallback` | Function | Failure callback. | false | - |

#### Demo

```js
Windvane.call2('WebAppInterface.setCustomPageTitle', {
  title: 'set title'
}, () => {
  alert('set success.');
}, (error) => {
  alert(JSON.stringify(error))
  document.title = 'set title';
});

```

## Tips

* Due to the long windvane link and heavy dependencies, Weex will later open up every API encapsulated within the module
* For weex android terminal, all UI related parts are not supported
* All API variables related to window and document browsers are not supported
