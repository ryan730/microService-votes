/**
 * mtop 相关
 */

/**
 * 获取 mtop 返回值中的错误信息
 * @param  {Object} result 返回对象
 * @return {String}        错误信息
 */
exports.getMsgFromMtop = function(result) {
  var ret;
  if (result.ret && result.ret instanceof Array) {
    ret = result.ret[0];
  } else {
    ret = result.ret;
  }
  var msg = ret;
  if (/FAIL_SYS_|HY_|ABORT|TIMEOUT|network/.test(msg)) {
    msg = '网络异常，请刷新后重试！';
  } else if (ret.split('::').length >= 2) {
    msg = ret.split('::')[1];
  }
  return msg;
};